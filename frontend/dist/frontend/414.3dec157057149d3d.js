"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[414],{9414:(_,s,t)=>{t.r(s),t.d(s,{VoucherReportComponent:()=>h});var e=t(4438),c=t(177),d=t(980),l=t(1176);function p(r,i){1&r&&e.nrm(0,"span",8)}function u(r,i){if(1&r&&(e.j41(0,"p",9),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.JRh(o.error())}}function g(r,i){if(1&r&&(e.j41(0,"p",10),e.EFF(1),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.JRh(o.success())}}function f(r,i){1&r&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"p"),e.EFF(3,"Generando reporte\u2026"),e.k0s()())}let h=(()=>{class r{constructor(o){this.api=o,this.downloading=(0,e.vPA)(!1),this.error=(0,e.vPA)(""),this.success=(0,e.vPA)("")}descargar(){this.error.set(""),this.success.set(""),this.downloading.set(!0),this.api.descargarReporteVoucher().pipe((0,d.j)(()=>this.downloading.set(!1))).subscribe({next:o=>{(new Date).toISOString().slice(0,19).replace(/[:T]/g,"");const n=document.createElement("a");n.href=URL.createObjectURL(o),n.download="reporte_voucher_.txt",n.click(),URL.revokeObjectURL(n.href),this.success.set("Reporte generado correctamente.")},error:()=>this.error.set("No fue posible generar el reporte. Verifica sesi\xf3n y vuelve a intentar.")})}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(l.h))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-voucher-report"]],standalone:!0,features:[e.aNF],decls:13,vars:7,consts:[[1,"voucher-report"],[1,"voucher-report__header"],[1,"actions"],["type","button",3,"click","disabled"],["class","spinner","aria-hidden","true",4,"ngIf"],["class","error",4,"ngIf"],["class","success",4,"ngIf"],["class","loading-overlay","aria-live","polite","aria-label","Generando reporte",4,"ngIf"],["aria-hidden","true",1,"spinner"],[1,"error"],[1,"success"],["aria-live","polite","aria-label","Generando reporte",1,"loading-overlay"],[1,"overlay-spinner"]],template:function(a,n){1&a&&(e.j41(0,"section",0)(1,"header",1)(2,"h2"),e.EFF(3,"Reporte por voucher"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Descarga el TXT consolidado con agregados por estado, mes/a\xf1o de radicaci\xf3n, prestador y voucher."),e.k0s()(),e.j41(6,"div",2)(7,"button",3),e.bIt("click",function(){return n.descargar()}),e.DNE(8,p,1,0,"span",4),e.EFF(9),e.k0s()(),e.DNE(10,u,2,1,"p",5)(11,g,2,1,"p",6)(12,f,4,0,"div",7),e.k0s()),2&a&&(e.BMQ("aria-busy",n.downloading()),e.R7$(7),e.Y8G("disabled",n.downloading()),e.R7$(),e.Y8G("ngIf",n.downloading()),e.R7$(),e.SpI(" ",n.downloading()?"Generando archivo.":"Descargar reporte"," "),e.R7$(),e.Y8G("ngIf",!n.downloading()&&n.error()),e.R7$(),e.Y8G("ngIf",!n.downloading()&&n.success()),e.R7$(),e.Y8G("ngIf",n.downloading()))},dependencies:[c.MD,c.bT],styles:[".voucher-report[_ngcontent-%COMP%]{display:grid;gap:1.25rem}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.8rem 1.6rem;border-radius:999px;border:none;font-weight:600;cursor:pointer;background:linear-gradient(135deg,#1d4ed8,#2563eb);color:#fff}.spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:50%;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error[_ngcontent-%COMP%]{color:#dc2626}.success[_ngcontent-%COMP%]{color:#059669}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a59;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;z-index:1000;color:#fff;backdrop-filter:blur(2px)}.overlay-spinner[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;border:3px solid rgba(255,255,255,.35);border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite}"],changeDetection:0})}}return r})()}}]);