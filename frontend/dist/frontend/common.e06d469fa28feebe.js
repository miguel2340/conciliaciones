"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[76],{3663:(b,l,s)=>{s.d(l,{U:()=>m});var e=s(4438),a=s(177),c=s(1562);function p(n,r){1&n&&e.nrm(0,"span",9)}function u(n,r){if(1&n&&(e.j41(0,"p",10),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI("Seleccionado: ",null==t.archivo?null:t.archivo.name,"")}}function h(n,r){if(1&n&&(e.j41(0,"p",11),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.ok())}}function d(n,r){if(1&n&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.err())}}function f(n,r){1&n&&(e.j41(0,"div",13),e.nrm(1,"div",14),e.j41(2,"p"),e.EFF(3,"Procesando archivo\u2026"),e.k0s()())}let m=(()=>{class n{constructor(t){this.http=t,this.titulo="Carga",this.descripcion="",this.url=null,this.tipo=null,this.archivo=null,this.subiendo=(0,e.vPA)(!1),this.ok=(0,e.vPA)(""),this.err=(0,e.vPA)("")}onFile(t){const o=t.target;this.archivo=o.files&&o.files.length?o.files[0]:null,this.ok.set(""),this.err.set("")}subir(){if(!this.archivo)return;if(this.ok.set(""),this.err.set(""),this.subiendo.set(!0),!this.url)return void setTimeout(()=>{this.subiendo.set(!1),this.ok.set("Archivo cargado correctamente (simulaci\xf3n).")},1200);const t=new FormData;t.append("archivo",this.archivo),this.tipo&&t.append("tipo",this.tipo),this.http.post(this.url,t,{headers:{Authorization:"Bearer "+(localStorage.getItem("access_token")||"")}}).subscribe({next:o=>{this.subiendo.set(!1),this.ok.set(o?.message||"Archivo cargado correctamente.")},error:o=>{this.subiendo.set(!1),this.err.set(o?.error?.message||o?.message||"Error en la carga")}})}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(c.Qq))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-carga-simple"]],inputs:{titulo:"titulo",descripcion:"descripcion",url:"url",tipo:"tipo"},standalone:!0,features:[e.aNF],decls:14,vars:10,consts:[[1,"carga-simple"],[1,"panel"],["type","file",3,"change","disabled"],["type","button",3,"click","disabled"],["class","spinner",4,"ngIf"],["class","archivo",4,"ngIf"],["class","ok",4,"ngIf"],["class","err",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"spinner"],[1,"archivo"],[1,"ok"],[1,"err"],[1,"loading-overlay"],[1,"overlay-spinner"]],template:function(o,i){1&o&&(e.j41(0,"section",0)(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"div",1)(6,"input",2),e.bIt("change",function(_){return i.onFile(_)}),e.k0s(),e.j41(7,"button",3),e.bIt("click",function(){return i.subir()}),e.DNE(8,p,1,0,"span",4),e.EFF(9),e.k0s(),e.DNE(10,u,2,1,"p",5)(11,h,2,1,"p",6)(12,d,2,1,"p",7),e.k0s(),e.DNE(13,f,4,0,"div",8),e.k0s()),2&o&&(e.R7$(2),e.JRh(i.titulo),e.R7$(2),e.JRh(i.descripcion),e.R7$(2),e.Y8G("disabled",i.subiendo()),e.R7$(),e.Y8G("disabled",!i.archivo||i.subiendo()),e.R7$(),e.Y8G("ngIf",i.subiendo()),e.R7$(),e.SpI(" ",i.subiendo()?"Subiendo\u2026":"Subir"," "),e.R7$(),e.Y8G("ngIf",i.archivo),e.R7$(),e.Y8G("ngIf",i.ok()),e.R7$(),e.Y8G("ngIf",i.err()),e.R7$(),e.Y8G("ngIf",i.subiendo()))},dependencies:[a.MD,a.bT],styles:[".panel[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}",".archivo[_ngcontent-%COMP%]{color:#64748b}",".ok[_ngcontent-%COMP%]{color:#059669}",".err[_ngcontent-%COMP%]{color:#dc2626}",".spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:50%;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;animation:spin .8s linear infinite;display:inline-block}",".loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a59;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;color:#fff;z-index:1000}",".overlay-spinner[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;border:3px solid rgba(255,255,255,.35);border-top-color:#fff;animation:spin .8s linear infinite}","@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"],changeDetection:0})}}return n})()}}]);